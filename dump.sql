-- H2 2.1.214;
;             
CREATE USER IF NOT EXISTS "SA" SALT 'a6ac105ece874811' HASH 'a575b23c8a89e41899c76265fbd647094c018eef36757051d7b1b0e9575b8c4c' ADMIN;         
CREATE MEMORY TABLE "PUBLIC"."APPOINTMENT"(
    "APPOINTMENT_TYPE_ID" INTEGER,
    "DATE" TIMESTAMP WITH TIME ZONE,
    "END_TIME" TIME WITH TIME ZONE,
    "START_TIME" TIME WITH TIME ZONE,
    "CLIENT_ID" BIGINT,
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "PROFESSIONAL_ID" BIGINT,
    "STATUS" CHARACTER VARYING(255)
);   
ALTER TABLE "PUBLIC"."APPOINTMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_286" PRIMARY KEY("ID");
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.APPOINTMENT;             
INSERT INTO "PUBLIC"."APPOINTMENT" VALUES
(1, TIMESTAMP WITH TIME ZONE '2023-08-01 00:00:00-03', TIME WITH TIME ZONE '13:30:00-03', TIME WITH TIME ZONE '13:00:00-03', 1, 1, 3, 'OPEN'),
(2, TIMESTAMP WITH TIME ZONE '2023-10-01 00:00:00-03', TIME WITH TIME ZONE '14:30:00-03', TIME WITH TIME ZONE '14:00:00-03', 2, 2, 4, 'OPEN');     
CREATE MEMORY TABLE "PUBLIC"."APPOINTMENT_COMMENT"(
    "APPOINTMENT_ID" BIGINT,
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "MOMENT" TIMESTAMP WITH TIME ZONE,
    "COMMENT" CHARACTER VARYING(1024)
); 
ALTER TABLE "PUBLIC"."APPOINTMENT_COMMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A" PRIMARY KEY("ID");          
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.APPOINTMENT_COMMENT;     
INSERT INTO "PUBLIC"."APPOINTMENT_COMMENT" VALUES
(1, 1, TIMESTAMP WITH TIME ZONE '2023-05-31 20:14:06.460477+00', 'Primeiro atendimento'),
(2, 2, TIMESTAMP WITH TIME ZONE '2023-05-31 20:14:06.466468+00', 'Parcelar em 3x');             
CREATE MEMORY TABLE "PUBLIC"."APPOINTMENT_TYPE"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "TYPE" CHARACTER VARYING(255)
);             
ALTER TABLE "PUBLIC"."APPOINTMENT_TYPE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8C" PRIMARY KEY("ID");            
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.APPOINTMENT_TYPE;        
INSERT INTO "PUBLIC"."APPOINTMENT_TYPE" VALUES
(1, 'Particular'),
(2, U&'Conv\00eanio');    
CREATE MEMORY TABLE "PUBLIC"."AREA"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(40)
);          
ALTER TABLE "PUBLIC"."AREA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");         
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.AREA;    
INSERT INTO "PUBLIC"."AREA" VALUES
(1, 'Fisioterapia'),
(2, 'Terapia Ocupacional');         
CREATE MEMORY TABLE "PUBLIC"."AREA_PROFESSIONAL"(
    "AREA_ID" INTEGER NOT NULL,
    "PROFESSIONAL_ID" BIGINT NOT NULL
); 
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.AREA_PROFESSIONAL;       
INSERT INTO "PUBLIC"."AREA_PROFESSIONAL" VALUES
(1, 3),
(2, 3),
(2, 4);    
CREATE MEMORY TABLE "PUBLIC"."CLIENT"(
    "DATE_OF_BIRTH" DATE,
    "PERSON_ID" BIGINT NOT NULL,
    "GENDER" CHARACTER VARYING(255)
);  
ALTER TABLE "PUBLIC"."CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_76" PRIMARY KEY("PERSON_ID");               
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.CLIENT;  
INSERT INTO "PUBLIC"."CLIENT" VALUES
(DATE '2000-08-02', 1, 'FEMALE'),
(DATE '1998-01-22', 2, 'MALE');      
CREATE MEMORY TABLE "PUBLIC"."PERSON"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "PHONE" CHARACTER VARYING(20),
    "EMAIL" CHARACTER VARYING(40),
    "NAME" CHARACTER VARYING(40) NOT NULL,
    "COMMENTS" CHARACTER VARYING(1024)
);               
ALTER TABLE "PUBLIC"."PERSON" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8C76" PRIMARY KEY("ID");    
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.PERSON;  
INSERT INTO "PUBLIC"."PERSON" VALUES
(1, '15 997079576', 'ana@gmail.com', 'Ana Maria', 'Cliente Vip'),
(2, '15 923233212', 'pedro@gmail.com', 'Pedro Silva', ''),
(3, '11 90232322', 'marco@gmail.com', 'Marco Nunes', ''),
(4, '13 99921212', 'marcelo@gmail.com', 'Marcelo Silva', U&'S\00f3 Particular');              
CREATE MEMORY TABLE "PUBLIC"."PROFESSIONAL"(
    "ACTIVE" BOOLEAN NOT NULL,
    "PERSON_ID" BIGINT NOT NULL
);             
ALTER TABLE "PUBLIC"."PROFESSIONAL" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B" PRIMARY KEY("PERSON_ID");          
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.PROFESSIONAL;            
INSERT INTO "PUBLIC"."PROFESSIONAL" VALUES
(TRUE, 3),
(TRUE, 4);            
CREATE MEMORY TABLE "PUBLIC"."WORK_SCHEDULE_ITEM"(
    "DAY_OF_WEEK" TINYINT NOT NULL,
    "END_TIME" TIME WITH TIME ZONE,
    "STAR_TIME" TIME WITH TIME ZONE,
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "PROFESSIONAL_ID" BIGINT
); 
ALTER TABLE "PUBLIC"."WORK_SCHEDULE_ITEM" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_36" PRIMARY KEY("ID");          
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.WORK_SCHEDULE_ITEM;      
INSERT INTO "PUBLIC"."WORK_SCHEDULE_ITEM" VALUES
(0, TIME WITH TIME ZONE '15:00:00-03', TIME WITH TIME ZONE '11:00:00-03', 1, 3),
(3, TIME WITH TIME ZONE '15:00:00-03', TIME WITH TIME ZONE '11:00:00-03', 2, 3),
(2, TIME WITH TIME ZONE '21:00:00-03', TIME WITH TIME ZONE '17:00:00-03', 3, 3),
(2, TIME WITH TIME ZONE '21:00:00-03', TIME WITH TIME ZONE '17:00:00-03', 4, 4);      
ALTER TABLE "PUBLIC"."APPOINTMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_28" CHECK("STATUS" IN('PRESENT', 'ABSENT', 'OPEN', 'CANCEL')) NOCHECK; 
ALTER TABLE "PUBLIC"."WORK_SCHEDULE_ITEM" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_3" CHECK("DAY_OF_WEEK" BETWEEN 0 AND 6) NOCHECK;
ALTER TABLE "PUBLIC"."CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" CHECK("GENDER" IN('MALE', 'FEMALE')) NOCHECK;            
ALTER TABLE "PUBLIC"."APPOINTMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" UNIQUE("APPOINTMENT_TYPE_ID");      
ALTER TABLE "PUBLIC"."APPOINTMENT_TYPE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" UNIQUE("TYPE");
ALTER TABLE "PUBLIC"."PERSON" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8C7" UNIQUE("EMAIL");       
ALTER TABLE "PUBLIC"."APPOINTMENT_COMMENT" ADD CONSTRAINT "PUBLIC"."FKQCMTLQI6SBHSIUINT9S43XRP5" FOREIGN KEY("APPOINTMENT_ID") REFERENCES "PUBLIC"."APPOINTMENT"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."AREA_PROFESSIONAL" ADD CONSTRAINT "PUBLIC"."FK7G9YUE8SV3CQAA70IDLKKDOS6" FOREIGN KEY("AREA_ID") REFERENCES "PUBLIC"."AREA"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."WORK_SCHEDULE_ITEM" ADD CONSTRAINT "PUBLIC"."FKJJ6V6DHVCF5YQPWORIKOVUGN8" FOREIGN KEY("PROFESSIONAL_ID") REFERENCES "PUBLIC"."PROFESSIONAL"("PERSON_ID") NOCHECK;       
ALTER TABLE "PUBLIC"."AREA_PROFESSIONAL" ADD CONSTRAINT "PUBLIC"."FKM1IF0EXKIW55GXY1X3MJVLPID" FOREIGN KEY("PROFESSIONAL_ID") REFERENCES "PUBLIC"."PROFESSIONAL"("PERSON_ID") NOCHECK;        
ALTER TABLE "PUBLIC"."PROFESSIONAL" ADD CONSTRAINT "PUBLIC"."FKOPRNCNOC2PI6BS2SDXJ2UKYYN" FOREIGN KEY("PERSON_ID") REFERENCES "PUBLIC"."PERSON"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."APPOINTMENT" ADD CONSTRAINT "PUBLIC"."FK7Y39UBFRCH1JV1CSEKP9RMUP6" FOREIGN KEY("PROFESSIONAL_ID") REFERENCES "PUBLIC"."PROFESSIONAL"("PERSON_ID") NOCHECK;              
ALTER TABLE "PUBLIC"."APPOINTMENT" ADD CONSTRAINT "PUBLIC"."FK3GBQCFD3MNWWCIT63LYBPQCF8" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."CLIENT"("PERSON_ID") NOCHECK;          
ALTER TABLE "PUBLIC"."CLIENT" ADD CONSTRAINT "PUBLIC"."FKKXFLPSUE6S9KSCGMUWT7OB1F3" FOREIGN KEY("PERSON_ID") REFERENCES "PUBLIC"."PERSON"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."APPOINTMENT" ADD CONSTRAINT "PUBLIC"."FKG6KJGJ7K74YDMVH9NC3TTKGGP" FOREIGN KEY("APPOINTMENT_TYPE_ID") REFERENCES "PUBLIC"."APPOINTMENT_TYPE"("ID") NOCHECK;             
